<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Mon Nov 23 16:39:04 BRST 2015 -->
<title>Authentication (restpki-client API)</title>
<meta name="date" content="2015-11-23">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Authentication (restpki-client API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/lacunasoftware/restpki/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/lacunasoftware/restpki/CadesSignatureFinisher.html" title="class in com.lacunasoftware.restpki"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/lacunasoftware/restpki/Authentication.html" target="_top">Frames</a></li>
<li><a href="Authentication.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.lacunasoftware.restpki</div>
<h2 title="Class Authentication" class="title">Class Authentication</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.lacunasoftware.restpki.Authentication</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Authentication</span>
extends java.lang.Object</pre>
<div class="block">Class used to authenticate a user with a X.509 public key certificate.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#Authentication-com.lacunasoftware.restpki.RestPkiClient-">Authentication</a></span>(<a href="../../../com/lacunasoftware/restpki/RestPkiClient.html" title="class in com.lacunasoftware.restpki">RestPkiClient</a>&nbsp;client)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../com/lacunasoftware/restpki/ValidationResults.html" title="class in com.lacunasoftware.restpki">ValidationResults</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#complete-java.lang.String-java.lang.String-java.lang.String-com.lacunasoftware.restpki.SecurityContext-">complete</a></span>(java.lang.String&nbsp;nonce,
        java.lang.String&nbsp;certificate,
        java.lang.String&nbsp;signature,
        <a href="../../../com/lacunasoftware/restpki/SecurityContext.html" title="class in com.lacunasoftware.restpki">SecurityContext</a>&nbsp;securityContext)</code>
<div class="block">Performs the final of two steps, receiving (1) the cryptographic nonce previously generated; (2) the user's certificate
 encoding; (3) the signature of the nonce and (4) a security context and yielding a ValidationResults.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../com/lacunasoftware/restpki/ValidationResults.html" title="class in com.lacunasoftware.restpki">ValidationResults</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#completeWithWebPki-java.lang.String-">completeWithWebPki</a></span>(java.lang.String&nbsp;token)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/lacunasoftware/restpki/PKCertificate.html" title="class in com.lacunasoftware.restpki">PKCertificate</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#getPKCertificate--">getPKCertificate</a></span>()</code>
<div class="block">Returns the user certificate's information (must only be called after calling the complete() method).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#start--">start</a></span>()</code>
<div class="block">Performs the first of two steps, yielding a cryptographic nonce that must be signed using the user certificate's
 private key.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/lacunasoftware/restpki/Authentication.html#startWithWebPki-com.lacunasoftware.restpki.SecurityContext-">startWithWebPki</a></span>(<a href="../../../com/lacunasoftware/restpki/SecurityContext.html" title="class in com.lacunasoftware.restpki">SecurityContext</a>&nbsp;securityContext)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Authentication-com.lacunasoftware.restpki.RestPkiClient-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Authentication</h4>
<pre>public&nbsp;Authentication(<a href="../../../com/lacunasoftware/restpki/RestPkiClient.html" title="class in com.lacunasoftware.restpki">RestPkiClient</a>&nbsp;client)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;java.lang.String&nbsp;start()
                       throws <a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></pre>
<div class="block">Performs the first of two steps, yielding a cryptographic nonce that must be signed using the user certificate's
 private key.
 <p>
     If you are using the Web PKI component to perform the client-side signature, this value must be passed
     to the component's method signData. The nonce is returned encoded in Base64, which is the same encoding
     expected by the component's signData method.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The cryptographic nonce that must be signed using the user certificate's private key, encoded in Base64.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></code> - If an error occurs while calling the REST PKI API.</dd>
</dl>
</li>
</ul>
<a name="startWithWebPki-com.lacunasoftware.restpki.SecurityContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startWithWebPki</h4>
<pre>public&nbsp;java.lang.String&nbsp;startWithWebPki(<a href="../../../com/lacunasoftware/restpki/SecurityContext.html" title="class in com.lacunasoftware.restpki">SecurityContext</a>&nbsp;securityContext)
                                 throws <a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></code></dd>
</dl>
</li>
</ul>
<a name="complete-java.lang.String-java.lang.String-java.lang.String-com.lacunasoftware.restpki.SecurityContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>complete</h4>
<pre>public&nbsp;<a href="../../../com/lacunasoftware/restpki/ValidationResults.html" title="class in com.lacunasoftware.restpki">ValidationResults</a>&nbsp;complete(java.lang.String&nbsp;nonce,
                                  java.lang.String&nbsp;certificate,
                                  java.lang.String&nbsp;signature,
                                  <a href="../../../com/lacunasoftware/restpki/SecurityContext.html" title="class in com.lacunasoftware.restpki">SecurityContext</a>&nbsp;securityContext)
                           throws <a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></pre>
<div class="block">Performs the final of two steps, receiving (1) the cryptographic nonce previously generated; (2) the user's certificate
 encoding; (3) the signature of the nonce and (4) a security context and yielding a ValidationResults.
 <p>
     The security context is used to determine if the user certificate can be trusted, and is mandatory.
     You can use one of the predefined security contexts such as pkiBrazil or pkiItaly, or you can create a custom
     security context by accessing the REST PKI site.
 </p>
 <p>
     This method does not throw an exception if the validation of the user's certificate fails. Instead, it
     returns a ValidationResults with validation errors. In order to determine whether the authentication was
     successful, you must call the isValid() method on the returned ValidationResults object.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nonce</code> - The cryptographic nonce generated in the first step, which was signed with the user certificate's private key.</dd>
<dd><code>certificate</code> - The binary encoding of the user's certificate, encoded in Base64 (this is the format returned by the Web PKI component's readCertificate method).</dd>
<dd><code>signature</code> - The digital signature of the nonce using the user certificate's private key, encoded in Base64 (this is the format returned by the Web PKI component's signData method).</dd>
<dd><code>securityContext</code> - The security context to be used to validate the user's certificate.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A ValidationResults object containing the results of the authentication (call the method isValid() to determine whether the authentication was successful).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></code> - If an error occurs while calling the REST PKI API (this method does not throw an exception if the validation of the user's certificate fails).</dd>
</dl>
</li>
</ul>
<a name="completeWithWebPki-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completeWithWebPki</h4>
<pre>public&nbsp;<a href="../../../com/lacunasoftware/restpki/ValidationResults.html" title="class in com.lacunasoftware.restpki">ValidationResults</a>&nbsp;completeWithWebPki(java.lang.String&nbsp;token)
                                     throws <a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/lacunasoftware/restpki/RestException.html" title="class in com.lacunasoftware.restpki">RestException</a></code></dd>
</dl>
</li>
</ul>
<a name="getPKCertificate--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPKCertificate</h4>
<pre>public&nbsp;<a href="../../../com/lacunasoftware/restpki/PKCertificate.html" title="class in com.lacunasoftware.restpki">PKCertificate</a>&nbsp;getPKCertificate()</pre>
<div class="block">Returns the user certificate's information (must only be called after calling the complete() method).
 <p>
     Note: if the authentication is successful, this method is guaranteed to return an object instance. However, if the
     authentication fails, this method may return null.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The user certificate's information, or null if it cannot be determined (does not happen if the authentication succeeds).</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/lacunasoftware/restpki/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/lacunasoftware/restpki/CadesSignatureFinisher.html" title="class in com.lacunasoftware.restpki"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/lacunasoftware/restpki/Authentication.html" target="_top">Frames</a></li>
<li><a href="Authentication.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
